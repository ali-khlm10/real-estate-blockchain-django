{% extends "shared/_layout.html" %}

{% block title %}صفحه ی تراکنش ها{%endblock title %} 


{% block content %}

<div class="all_body">

    <main class="trxs_body_main">

            <section class="trxs_body_header">
                <header>
                    <h4>املاک و مستغلات/تراکنش ها</h4>
                </header>
            </section>


            <section class="main_dashbord">
                <div class="dashboard_body">
                    <header>
                        <h3>تعداد کل تراکنش های انجام شده : {{transactions_count}}</h3>
                    </header>
                    <main class="mined_trxs">
                        <table>
                            <thead>
                                <tr class="row_of_table">
                                    <th id="trx_hash">هش تراکنش</th>
                                    <th id="trx_operation">عملیات</th>
                                    <th id="trx_status">وضعیت</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% if current_port >= 5000 and current_port < 6000%}
                                    {% for trx,trx_status in zipped_list %}
                                        <tr class="row_of_table">
                                            <td id="trx_hash_number">
                                                <a href="{% url "trx" trx_hash=trx.transaction_hash %}">{{trx.transaction_hash}}</a>
                                            </td>
                                            <td id="trx_operation_style">
                                                {% if trx.transaction_type == "miner_reward" %}
                                                    <span >انتقال پاداش</span>
                                                {% elif trx.transaction_type == "tokenization" %}
                                                    <span >توکن سازی ملک</span>

                                                {% elif trx.transaction_type == "buy_request" %}
                                                    <span >درخواست خرید ملک</span>

                                                {% elif trx.transaction_type == "accept_buy_request" %}
                                                    <span >پذیرش درخواست خرید</span>

                                                {% elif trx.transaction_type == "reject_buy_request" %}
                                                <span >رد درخواست خرید</span>
                                            
                                                {% elif trx.transaction_type == "buy_operation" %}
                                                <span >خرید ملک</span>
                                                                                    
                                                {% else %}
                                                <span >فروش ملک</span>
                                                
                                                {% endif %}
                                            </td>
                                            <td id="trx_status_result">
                                                {% if trx_status == "published" %}
                                                    منتشر شده 
                                                {% elif trx_status == "not_published" %}
                                                    منتشر نشده
                                                {%else%}
                                                    در صف انتشار
                                                {% endif %}  
                                    
                                            </td>
                                        </tr>                                
                                    {% endfor %}  
                                {%else%} 
                                    {% for trx in trxs %}
                                        <tr class="row_of_table">
                                            <td id="trx_hash_number">
                                                <a href="{% url "trx" trx_hash=trx.transaction_hash %}">{{trx.transaction_hash}}</a>
                                            </td>
                                            <td id="trx_operation_style">
                                                {% if trx.transaction_type == "miner_reward" %}
                                                    <span >انتقال پاداش</span>
                                                {% elif trx.transaction_type == "tokenization" %}
                                                    <span >توکن سازی ملک</span>

                                                {% elif trx.transaction_type == "buy_request" %}
                                                    <span >درخواست خرید ملک</span>

                                                {% elif trx.transaction_type == "accept_buy_request" %}
                                                    <span >پذیرش درخواست خرید</span>

                                                {% elif trx.transaction_type == "reject_buy_request" %}
                                                <span >رد درخواست خرید</span>
                                            
                                                {% elif trx.transaction_type == "buy_operation" %}
                                                <span >خرید ملک</span>
                                                                                    
                                                {% else %}
                                                <span >فروش ملک</span>
                                                
                                                {% endif %}
                                            </td>
                                            <td id="trx_status_result">
                                                {% if trx.trx_status.all.first.status == "published" %}
                                                    منتشر شده 
                                                {% elif trx.trx_status.all.first.status == "not_published" %}
                                                    منتشر نشده
                                                {%else%}
                                                    در صف انتشار
                                                {% endif %}  
                                    
                                            </td>
                                        </tr>                                
                                    {% endfor %}                             
                                {% endif %}


                            </tbody>    
                        </table>
                    </main>
                </div>
                
            </section>

        

    </main>


</div>


{% endblock content %}
